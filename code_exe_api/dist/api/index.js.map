{"version":3,"sources":["../../src/api/index.js"],"names":["config","db","api","use","get","req","res","json","hey","requestedOrder","body","order","error","status","send","cost","totalCost"],"mappings":";;;;;;AAAA;;AACA;;AACA;;;;AACA;;;;;;kBAEe,gBAAoB;AAAA,KAAjBA,MAAiB,QAAjBA,MAAiB;AAAA,KAATC,EAAS,QAATA,EAAS;;AAClC,KAAIC,MAAM,sBAAV;;AAEA;AACAA,KAAIC,GAAJ,CAAQ,SAAR,EAAmB,sBAAO,EAAEH,cAAF,EAAUC,MAAV,EAAP,CAAnB;;AAEA;AACAC,KAAIE,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BA,MAAIC,IAAJ,CAAS,EAAEC,KAAK,KAAP,EAAT;AACA,EAFD;;AAIAN,KAAIE,GAAJ,CAAQ,OAAR,EAAiB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC9B,MAAMG,iBAAiBJ,IAAIK,IAAJ,CAASC,KAAhC;AACA,MAAMA,QAAQ,4BAAaF,cAAb,CAAd;AACA,MAAIE,MAAMC,KAAV,EAAiB;AAChBN,OAAIO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBH,MAAMC,KAA3B;AACA,GAFD,MAEO;AACNN,OAAIC,IAAJ,CAAS;AACRQ,UAAMJ,MAAMK;AADJ,IAAT;AAGA;AACD,EAVD;;AAYA,QAAOd,GAAP;AACA,C","file":"index.js","sourcesContent":["import { version } from '../../package.json';\nimport { Router } from 'express';\nimport facets from './facets';\nimport processOrder from '../lib/processOrder'\n\nexport default ({ config, db }) => {\n\tlet api = Router();\n\n\t// mount the facets resource\n\tapi.use('/facets', facets({ config, db }));\n\n\t// perhaps expose some API metadata at the root\n\tapi.get('/', (req, res) => {\n\t\tres.json({ hey: \"man\" });\n\t});\n\n\tapi.get('/cost', (req, res) => {\n\t\tconst requestedOrder = req.body.order\n\t\tconst order = processOrder(requestedOrder)\n\t\tif (order.error) {\n\t\t\tres.status(400).send(order.error)\n\t\t} else {\n\t\t\tres.json({\n\t\t\t\tcost: order.totalCost\n\t\t\t});\n\t\t}\n\t});\n\n\treturn api;\n}\n"]}